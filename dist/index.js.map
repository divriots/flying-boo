{"version":3,"sourceRoot":"/source_map/","sources":["src/index.ts"],"names":[],"mappings":"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","sourcesContent":["import {html, css, LitElement} from 'lit';\nimport {customElement, property} from 'lit/decorators.js';\nimport ghostHide from './ghostHideURI';\nimport ghost from './ghostURI';\n\nfunction rangeMap(number, inMin, inMax, outMin, outMax) {\n  return ((number - inMin) * (outMax - outMin)) / (inMax - inMin) + outMin;\n}\n\n@customElement('flying-boo')\nexport class FlyingBoo extends LitElement {\n  static get styles() {\n    return css`\n      :host {\n        position: absolute;\n        display: block;\n        --scale-x: 1;\n        z-index: 999999;\n      }\n\n      :host([x-direction=\"right\"]) {\n        --scale-x: -1;\n      }\n\n      img {\n        width: 80px;\n        transform: scaleX(var(--scale-x));\n      }\n    `;\n  }\n\n  @property({ attribute: false })\n  hidden = false;\n\n  @property({ type: 'String', reflect: true, attribute: 'x-direction' })\n  xDirection = 'right';\n\n  @property({ type: 'Number', reflect: true, attribute: 'change-speed' })\n  changeSpeed = 5000;\n\n  @property({ type: 'Number', reflect: true })\n  speed = 1;\n\n  @property({ type: 'Number', reflect: true, attribute: 'scare-distance' })\n  scareDistance = 100;\n\n  mouseX: number;\n  mouseY: number;\n  velocity: { x: 0, y: 0 };\n  velocityInterval: ReturnType<typeof setInterval>;\n  moveInterval: ReturnType<typeof setInterval>;\n\n  connectedCallback() {\n    super.connectedCallback();\n    if (this.parentElement !== document.documentElement) {\n      document.documentElement.prepend(this);\n    } else {\n      this.init();\n    }\n  }\n\n  render() {\n    return html`\n      <img src=\"data:image/gif;base64,${this.hidden ? ghostHide : ghost}\" />\n    `;\n  }\n\n  get frameWidth() {\n    return document.documentElement.getBoundingClientRect().width;\n  }\n\n  get frameHeight() {\n    return document.documentElement.getBoundingClientRect().height;\n  }\n\n  get x() {\n    return parseFloat(\n      getComputedStyle(this).getPropertyValue('left').replace('px', '')\n    );\n  }\n\n  set x(value) {\n    this.style.setProperty('left', `${value}px`);\n\n    if (value > this.frameWidth - this.getBoundingClientRect().width) {\n      this.boundaryHit('right');\n    }\n\n    if (value < 0) {\n      this.boundaryHit('left');\n    }\n  }\n\n  get y() {\n    return parseFloat(\n      getComputedStyle(this).getPropertyValue('top').replace('px', '')\n    );\n  }\n\n  set y(value) {\n    this.style.setProperty('top', `${value}px`);\n\n    if (\n      value >\n      this.frameHeight - this.getBoundingClientRect().height\n    ) {\n      this.boundaryHit('bottom');\n    }\n\n    if (value < 0) {\n      this.boundaryHit('top');\n    }\n  }\n\n  init() {\n    const xMiddle = this.frameWidth / 2;\n    const yMiddle = document.documentElement.clientHeight / 2;\n\n    this.x = xMiddle;\n    this.y = yMiddle;\n    this.randomizeVelocity();\n    this.move();\n\n    document.documentElement.addEventListener('mousemove', (ev) => {\n      this.checkDistance({ x: ev.pageX, y: ev.pageY });\n    });\n  }\n\n  randomizeVelocity(forced: { x?: number, y?: number} = {}) {\n    const { x: _x, y: _y } = forced;\n    const x = _x || rangeMap(Math.random(), 0, 1, -1, 1);\n    const y = _y || rangeMap(Math.random(), 0, 1, -1, 1);\n    this.velocity = { x, y };\n    this.xDirection = x > 0 ? 'right' : 'left';\n  }\n\n  move() {\n    this.hidden = false;\n    this.startVelocityInterval();\n    this.moveInterval = setInterval(() => {\n      this.x = this.x + this.velocity.x * this.speed;\n      this.y = this.y + this.velocity.y * this.speed;\n    }, 1);\n  }\n\n  hide() {\n    clearInterval(this.moveInterval);\n    clearInterval(this.velocityInterval);\n    this.hidden = true;\n  }\n\n  startVelocityInterval() {\n    this.velocityInterval = setInterval(() => this.randomizeVelocity(), this.changeSpeed);\n  }\n\n  boundaryHit(side) {\n    clearInterval(this.velocityInterval);\n\n    switch (side) {\n      case 'right':\n        this.randomizeVelocity({ x: rangeMap(Math.random(), 0, 1, -0.5, -1) });\n        break;\n      case 'left':\n        this.randomizeVelocity({ x: rangeMap(Math.random(), 0, 1, 0.5, 1) });\n        break;\n      case 'top':\n        this.randomizeVelocity({ y: rangeMap(Math.random(), 0, 1, 0.5, 1) });\n        break;\n      case 'bottom':\n        this.randomizeVelocity({ y: rangeMap(Math.random(), 0, 1, -0.5, -1) });\n        break;\n    }\n\n    this.startVelocityInterval();\n  }\n\n  checkDistance(coords: { x: number, y: number }) {\n    const xDistance = Math.abs(\n      this.x + this.getBoundingClientRect().width / 2 - coords.x\n    );\n    const yDistance = Math.abs(\n      this.y + this.getBoundingClientRect().height / 2 - coords.y\n    );\n\n    const distance = Math.sqrt(xDistance ** 2 + yDistance ** 2);\n\n    if (distance < this.scareDistance && !this.hidden) {\n      this.hide();\n    } \n    \n    if (distance >= this.scareDistance && this.hidden) {\n      this.randomizeVelocity();\n      this.move();\n    }\n  }\n}\n\nexport const cleanup = (tagName = 'flying-boo') => {\n  Array.from(document.querySelectorAll(tagName)).forEach(ghostEl => ghostEl.remove());\n}\n"]}